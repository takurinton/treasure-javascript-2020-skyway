(this.webpackJsonptext=this.webpackJsonptext||[]).push([[0],{63:function(e,t,a){e.exports=a(94)},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=a(28),s=a(6),u=a(126),l=a(116),m=a(117),f=a(97),p=a(118),h=a(51),d=a(115),b=a(125),g=Object(h.a)({palette:{primary:{light:"#ffff8b",main:"#81c784",dark:"#c9bc1f",contrastText:"#000000"},secondary:{light:"#63a4ff",main:"#1976d2",dark:"#004ba0",contrastText:"#ffffff"}}}),v=Object(d.a)((function(){return Object(b.a)({root:{marginBottom:"3%",flexGrow:1},title:{flexGrow:1,textAlign:"center"},link:{color:"#000",textDecoration:"none"}})})),E=Object(d.a)((function(){return Object(b.a)({root:{marginRight:"auto",marginLeft:"auto",width:"50%",textAlign:"center"},topPage:{paddingTop:"3%",paddingBottom:"10%"},inputText:{width:"80%"},button:{marginLeft:"2%",width:"18%"}})})),O=Object(d.a)((function(){return Object(b.a)({root:{display:"block",width:"820px",marginRight:"auto",marginLeft:"auto"},room:{display:"flex"},camera:{margin:"10px"},inputID:{marginTop:"5%",marginRight:"auto",marginLeft:"auto",width:"80%"}})})),j=function(){var e=v();return r.a.createElement(u.a,{position:"static",className:e.root},r.a.createElement(l.a,null,r.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"}),r.a.createElement(f.a,{variant:"h6",className:e.title},r.a.createElement(p.a,{href:"/textapp/#/",className:e.link},"Takurinton skyway app"))))},x=a(18),y=a(119),w=a(123),k=a(122),N=function(){var e=E();return r.a.createElement(k.a,{className:e.topPage},r.a.createElement(f.a,{variant:"h2"},"Takurinton hoge app"))},S=function(){var e=E(),t=Object(s.f)(),a=Object(n.useState)(""),c=Object(x.a)(a,2),o=c[0],i=c[1];return r.a.createElement(k.a,{className:e.root},r.a.createElement(N,null),r.a.createElement("form",{onSubmit:function(e){t.push({pathname:"/room",state:o})}},r.a.createElement(w.a,{onChange:function(e){i(e.target.value)},required:!0,value:o,type:"text",name:"name",placeholder:"\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",className:e.inputText}),r.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:e.button},"\u6b21\u3078")))},P=a(17),T=a.n(P),I=a(27),R=a(48),D=a.n(R),F=function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://script.google.com/macros/s/AKfycbznp9P5nNsXuOQP-9zQTcRdXeeJfpx_JaBXXikvFm4L2PK3Z_Dx/exec",{method:"POST",credentials:"same-origin",body:JSON.stringify(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J={name:"",contents:""},L=function(){var e=Object(n.useState)(J),t=Object(x.a)(e,2),a=t[0],r=t[1];return{state:a,handleSubmit:function(e){F(e),r(J)}}},B=a(49),X=a(50),A=function(){function e(){var t=this;Object(B.a)(this,e),this.r=new window.webkitSpeechRecognition,this.running=!1,this.onFinal=void 0,this.onProgress=void 0,this.onError=void 0,this.r.continuous=!0,this.r.interimResults=!0,this.r.onresult=function(e){for(var a=e.resultIndex;a<e.results.length;++a)e.results[a].isFinal?t.onFinal&&t.onFinal(e.results[a][0].transcript):t.onProgress&&t.onProgress(e.results[a][0].transcript)},this.r.onerror=function(e){console.warn(e),t.onError&&t.onError()},this.start()}return Object(X.a)(e,[{key:"start",value:function(){this.running=!0,this.r.start()}},{key:"stop",value:function(){this.running=!1,this.r.stop()}},{key:"toggle",value:function(){this.running?this.stop():this.start()}}]),e}(),C=function(){var e=O(),t=E(),a=new D.a({key:"f4314d6c-ad3c-450c-90df-2811611d4a25"}),c=Object(s.g)().state;if("string"===typeof c)var o=c;var i=Object(n.useState)(""),u=Object(x.a)(i,2),l=u[0],m=u[1],p=Object(n.useState)(""),h=Object(x.a)(p,2),d=h[0],b=h[1],g=Object(n.useRef)(null),v=Object(n.useRef)(null),j=Object(n.useRef)(),N=Object(n.useState)(""),S=Object(x.a)(N,2),P=(S[0],S[1]),R=Object(n.useState)(""),F=Object(x.a)(R,2),J=F[0],B=F[1],X=L(),C=X.state,Y=X.handleSubmit;return Object(n.useEffect)((function(){a.on("open",(function(){m(a.id),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){g.current.srcObject=e}))})),a.on("call",(function(e){e.answer(g.current.srcObject),e.on("stream",function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.current.srcObject=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[]),Object(n.useEffect)((function(){var e=j.current=new A;e.onFinal=function(t){e.toggle(),B(t);var a=o;C.name=a,C.contents=t,Y(C)},e.onError=function(){console.log("error")},e.onProgress=P}),[J]),r.a.createElement(k.a,{className:e.root},r.a.createElement(k.a,{className:e.room},r.a.createElement(k.a,{className:e.camera},r.a.createElement(f.a,{variant:"h4"},"You: ",void 0===typeof c?"":c),r.a.createElement("video",{width:"400px",autoPlay:!0,muted:!0,playsInline:!0,ref:g}),r.a.createElement("p",null,"Your ID : ",l)),r.a.createElement(k.a,{className:e.camera},r.a.createElement(f.a,{variant:"h4"},"Your friend"),r.a.createElement("video",{width:"400px",autoPlay:!0,muted:!0,playsInline:!0,ref:v}))),r.a.createElement(k.a,{className:e.inputID},r.a.createElement(w.a,{value:d,onChange:function(e){return b(e.target.value)},placeholder:"\u901a\u8a71\u76f8\u624b\u306eID\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",className:t.inputText}),r.a.createElement(y.a,{onClick:function(){a.call(d,g.current.srcObject).on("stream",function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.current.srcObject=t,e.next=3,v.current.play().catch(console.error);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},variant:"contained",color:"primary",className:t.button},"\u767a\u4fe1")))},Y=function(){return r.a.createElement(k.a,{alignItems:"center"},r.a.createElement(j,null),r.a.createElement(i.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:S}),r.a.createElement(s.a,{exact:!0,path:"/room",component:C}))))},z=a(120),G=a(121);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z.a,null,r.a.createElement(G.a,{theme:g},r.a.createElement(Y,null)))),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.b57fe57c.chunk.js.map